/*
File: flexie.js

About: Version
	1.0.3

Project: Flexie

Description:
	Legacy support for the CSS3 Flexible Box Model

License:
	The MIT License
	
	Copyright (c) 2010 Richard Herrera

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
*//*
Class: Flexie
	Scoped to the Flexie Global Namespace
*//*jslint evil: true, regexp: false, plusplus: false *//*global window, document */function CSS3MultiColumn(){function loadStylesheets(){if(document.styleSheets){for(var e=0;e<document.styleSheets.length;e++)cssCache[document.styleSheets[e].href]=!1;for(var e=0;e<document.styleSheets.length;e++)loadCssCache(document.styleSheets[e],"parseStylesheets")}else if(document.getElementsByTagName){var t=document.getElementsByTagName("link");for(var e=0;e<t.length;e++)cssCache[t[e].href]=!1;for(var e=0;e<t.length;e++)loadCssCache(t[e],"parseStylesheets")}}function loadCssCache(s,callback){if(s.href&&s.cssText){cssCache[s.href]=s.cssText;eval(callback)()}if(s.href&&typeof XMLHttpRequest!="undefined"){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4)if(typeof xmlhttp.status=="undefined"||xmlhttp.status==200||xmlhttp.status==304){cssCache[s.href]=xmlhttp.responseText;eval(callback)()}};xmlhttp.open("GET",s.href,!0);xmlhttp.send(null)}}function parseStylesheets(){var e=!0;for(var t in cssCache)cssCache[t]!=0?parseStylesheet(cssCache[t]):e=!1;e&&processElements()}function parseStylesheet(e){var t=new ut.getPseudoCssRules("column-count",e);for(var n=0;t&&n<t.cssRules.length;n++){pseudoCSSRules[t.cssRules[n].selectorText]||(pseudoCSSRules[t.cssRules[n].selectorText]=new Object);pseudoCSSRules[t.cssRules[n].selectorText]["column-count"]=t.cssRules[n].value}t=new ut.getPseudoCssRules("column-width",e);for(var n=0;t&&n<t.cssRules.length;n++){pseudoCSSRules[t.cssRules[n].selectorText]||(pseudoCSSRules[t.cssRules[n].selectorText]=new Object);pseudoCSSRules[t.cssRules[n].selectorText]["column-width"]=t.cssRules[n].value}t=new ut.getPseudoCssRules("column-gap",e);for(var n=0;t&&n<t.cssRules.length;n++){pseudoCSSRules[t.cssRules[n].selectorText]||(pseudoCSSRules[t.cssRules[n].selectorText]=new Object);pseudoCSSRules[t.cssRules[n].selectorText]["column-gap"]=t.cssRules[n].value}t=new ut.getPseudoCssRules("column-rule",e);for(var n=0;t&&n<t.cssRules.length;n++){pseudoCSSRules[t.cssRules[n].selectorText]||(pseudoCSSRules[t.cssRules[n].selectorText]=new Object);pseudoCSSRules[t.cssRules[n].selectorText]["column-rule"]=t.cssRules[n].value}}function processElements(){if(!documentReady)return;for(var e in pseudoCSSRules){debug(e+" cc:"+pseudoCSSRules[e]["column-count"]+" cw:"+pseudoCSSRules[e]["column-width"]+" cr:"+pseudoCSSRules[e]["column-rule"]+" cg:"+pseudoCSSRules[e]["column-gap"]);var t=ut.cssQuery(e);for(var n=0;n<t.length;n++)processElement(t[n],pseudoCSSRules[e]["column-count"],pseudoCSSRules[e]["column-width"],pseudoCSSRules[e]["column-gap"],pseudoCSSRules[e]["column-rule"])}}function processElement(e,t,n,r,i){var s,o,u=0;if(e.clientWidth&&e.clientWidth!=0){var a;e.currentStyle?a=parseInt(e.currentStyle.paddingLeft.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.paddingRight.replace(/[\D]*/gi,"")):document.defaultView&&document.defaultView.getComputedStyle&&(a=parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,""))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,"")));isNaN(a)&&(a=0);o=(e.clientWidth-a).toString()+"px"}else if(e.scrollWidth){var f,a;e.currentStyle?a=parseInt(e.currentStyle.paddingLeft.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.paddingRight.replace(/[\D]*/gi,"")):document.defaultView&&document.defaultView.getComputedStyle&&(a=parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,""))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,"")));isNaN(a)&&(a=0);e.currentStyle?f=parseInt(e.currentStyle.borderLeftWidth.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.borderRightWidth.replace(/[\D]*/gi,"")):document.defaultView&&document.defaultView.getComputedStyle&&(f=parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("border-left-width").replace(/[\D]*/gi,""))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("border-right-width").replace(/[\D]*/gi,"")));isNaN(f)&&(f=0);o=(e.scrollWidth-a-f).toString()+"px"}else o="99%";var l=parseInt(o.replace(/[\D]*/gi,""));!n||n=="auto"?s=o.replace(/[\d]*/gi,""):s=n.replace(/[\d]*/gi,"");s||(s="px");r?r=parseInt(r.replace(/[\D]*/gi,"")):s=="%"?r=1:r=15;if(i&&i!="none"){r=Math.floor(r/2);u=r+parseInt(i.substring(i.search(/\d/),i.search(/\D/)))}if(!n||n=="auto")n=(l-(r+u)*(t-1))/t;else{n=parseInt(n.replace(/[\D]*/gi,""));if(!t||t=="auto")t=Math.floor(l/(n+r))}n-=1;var c=document.createElement("div"),h=e.parentNode;c=h.insertBefore(c,e);var p=h.removeChild(e);p=c.appendChild(p);c.className=p.className;p.className="";p.id=ut.randomId();p.style.width=n.toString()+s;typeof p.style.styleFloat!="undefined"&&(p.style.styleFloat="left");typeof p.style.cssFloat!="undefined"&&(p.style.cssFloat="left");var d=Math.floor(p.offsetHeight/t)+14;c.id||(c.id=ut.randomId());var v=1;for(var m=1;m<t&&p&&v<t+5;m++){bestSplitPoint=null;secondSplitPoint=null;secondSplitBottom=0;findSplitPoint(p,d*m,c);isDebug&&(bestSplitPoint.style.border="1px solid #00FF00");if(bestSplitPoint&&!isElementSplitable(bestSplitPoint)){d=getElementRelativeTop(bestSplitPoint,c)+bestSplitPoint.offsetHeight+10;m=1;debug("reset new Height = "+d+" relativetop="+getElementRelativeTop(bestSplitPoint,c)+" offsetHeight= "+bestSplitPoint.offsetHeight)}else bestSplitPoint||debug("No split point found with "+d);v++}debug("<table><tr><td>Avail. Width</td><td>"+l+"</td><td>Units</td><td>"+s+"</td></tr><tr><td>column_width</td><td>"+n+"</td><td>column_count</td><td>"+t+"</td></tr><tr><td>column_gap</td><td>"+r+"</td><td>column_rule</td><td>"+i+"</td></tr><tr><td>New Height</td><td>"+d+"</td><td></td><td></td></tr></table>");for(var m=1;m<t&&p;m++){bestSplitPoint=null;secondSplitPoint=null;secondSplitBottom=0;findSplitPoint(p,d,c);if(bestSplitPoint&&isElementSplitable(bestSplitPoint)&&p.id!=bestSplitPoint.id){var g=bestSplitPoint;isDebug&&(secondSplitPoint.style.border="1px dotted #00F")}else var g=secondSplitPoint;if(!g){debug("<hr />No split point found for "+p.tagName+" "+d);return}isDebug&&(g.style.border="1px solid #F00");var y=p.cloneNode(!1);y.id=ut.randomId();p.parentNode.insertBefore(y,p.nextSibling);y.style.paddingLeft=r+s;if(i&&i!="none"){y.style.borderLeft=i;p.style.paddingRight=r+s}document.all&&!window.opera&&(p.style.height=d+"px");p.style.minHeight=d+"px";var b=createNodeAncestors(g,p,y,"append"),w=g;while(w&&w.id!=p.id){var E=w.nextSibling;while(E){moveNode(E,p,y);E=w.nextSibling}w=w.parentNode}var S=splitElement(g,d-getElementRelativeTop(g,c),p,y),h=g.parentNode;while(h&&h.id!=p.id){var x=h.firstChild;while(x)if(x.nodeType==1&&x.childNodes.length==0||x.nodeType==3&&x.nodeValue.replace(/[\u0020\u0009\u000A]*/,"")==""){h.removeChild(x);x=h.firstChild}else x=x.nextSibling;h=h.parentNode}if(S){g=p.lastChild;if(g&&document.defaultView&&document.defaultView.getComputedStyle(g,"").getPropertyValue("text-align")=="justify"||g.currentStyle&&g.currentStyle.textAlign=="justify"){var T=document.createTextNode(" "+S.replace(/./g,"Â ")),N=document.createElement("span");g.appendChild(N);N.style.lineHeight="1px";N.appendChild(T)}}p=y}if(p){document.all&&!window.opera&&(p.style.height=d+"px");p.style.minHeight=d+"px"}var C=document.createElement("div");C.style.clear="left";C.appendChild(document.createTextNode(" "));c.appendChild(C);navigator.userAgent.toLowerCase().indexOf("safari")+1&&(c.innerHTML+=" ")}function findSplitPoint(e,t,n){if(e.nodeType==1){var r=getElementRelativeTop(e,n),i=r+e.offsetHeight;if(r<t&&i>t){bestSplitPoint=e;if(isElementSplitable(e))for(var s=0;s<e.childNodes.length;s++)findSplitPoint(e.childNodes[s],t,n);return}if(i<=t&&i>=secondSplitBottom){secondSplitBottom=i;secondSplitPoint=e}}return}function isElementSplitable(e){if(e.tagName){var t=e.tagName.toUpperCase();for(var n=0;n<splitableTags.length;n++)if(t==splitableTags[n])return!0}return!1}function splitElement(e,t,n,r){var i=e.lastChild;while(i){if(i.nodeType==3){var s="dummmy",o="";while(e.offsetHeight>t+2&&s!=""){s=stripOneLine(i);o=s+o}if(o!=""){var u=createNodeAncestors(i,n,r,"insertBefore");u.insertBefore(document.createTextNode(o),u.firstChild)}if(i.nodeValue!="")break;i.parentNode.removeChild(i)}else{var u=createNodeAncestors(i,n,r,"insertBefore");u.insertBefore(i.parentNode.removeChild(i),u.firstChild)}i=e.lastChild}return s}function stripOneLine(e){while(e&&e.nodeType!=3)e=e.firstChild;if(!e)return;var t=e.parentNode,n=t.offsetHeight;if(!n)return"";var r=e.nodeValue,i=e.nodeValue.lastIndexOf(" ");while(i!=-1&&t.offsetHeight==n){e.nodeValue=e.nodeValue.substr(0,i);i=e.nodeValue.lastIndexOf(" ");i==-1&&(i=e.nodeValue.lastIndexOf("\n"))}t.offsetHeight==n&&(e.nodeValue="");return r.substr(e.nodeValue.length)}function createNodeAncestors(e,t,n,r){var i=new Array,s=n,o=e.parentNode;while(o&&o.id!=t.id){i[i.length]=o;o.id||(o.id=ut.randomId());o=o.parentNode}for(var u=i.length-1;u>=0;u--){for(var a=0;a<s.childNodes.length&&(s.childNodes[a].nodeType==3||!s.childNodes[a].className.match(i[u].id+"-css3mc"));a++);if(a==s.childNodes.length){r=="append"?s=s.appendChild(document.createElement(i[u].tagName)):s=s.insertBefore(document.createElement(i[u].tagName),s.firstChild);s.className=i[u].className+" "+i[u].id+"-css3mc";s.style.marginTop="0";s.style.paddingTop="0";if(s.tagName.toUpperCase()=="OL"&&e.nodeType==1&&e.tagName.toUpperCase()=="LI"){var f=e.previousSibling,l=0;while(f){f.nodeType==1&&f.tagName.toUpperCase()=="LI"&&l++;f=f.previousSibling}s.setAttribute("start",l)}}else{s=s.childNodes[a];if(s.tagName.toUpperCase()=="OL"&&(s.start==-1||s.start==1)&&e.nodeType==1&&e.tagName.toUpperCase()=="LI"){var f=e.previousSibling,l=0;while(f){f.nodeType==1&&f.tagName.toUpperCase()=="LI"&&l++;f=f.previousSibling}s.setAttribute("start",l)}}}return s}function moveNode(e,t,n){var r=createNodeAncestors(e,t,n,"append"),i=r.appendChild(e.parentNode.removeChild(e));if(r.id==n.id&&i.nodeType==1){i.style.paddingTop="0px";i.style.marginTop="0px"}return i}function getElementRelativeTop(e,t){var n=0;if(e.offsetParent)while(e.offsetParent){n+=e.offsetTop;e=e.offsetParent}var r=0;if(t.offsetParent)while(t.offsetParent){r+=t.offsetTop;t=t.offsetParent}return n-r}var cssCache=new Object,splitableTags=new Array("P","DIV","SPAN","BLOCKQUOTE","ADDRESS","PRE","A","EM","I","STRONG","B","CITE","OL","UL","LI"),pseudoCSSRules=new Object,ut=new CSS3Utility,debug=ut.debug;if(document.location.search.match("mode=debug"))var isDebug=!0;else var isDebug=!1;var bestSplitPoint=null,secondSplitPoint=null,secondSplitBottom=0,documentReady=!1;ut.XBrowserAddEventHandler(window,"load",function(){documentReady=!0;processElements()});loadStylesheets()}function CSS3Utility(){this.handlerList=new Array}var Flexie=function(win,doc){function trim(e){e&&(e=e.replace(LEADINGTRIM,EMPTY_STRING).replace(TRAILINGTRIM,EMPTY_STRING));return e}function forEach(e,t){var n,r=0,i,s=e?e.length:UNDEFINED,o=s===UNDEFINED;if(o){for(n in e)if(e.hasOwnProperty(n)&&t.call(e[n],n,e[n])===FALSE)break}else for(i=e[0];r<s&&t.call(i,r,i)!==FALSE;i=e[++r])continue}function determineSelectorMethod(){var engines=ENGINES,method;forEach(engines,function(engine,obj){if(win[engine]&&!method){method=eval(obj.s.replace("*",engine));if(method){ENGINE=engine;return!1}}});return method}function addEvent(e,t){e="on"+e;var n=win[e];typeof win[e]!="function"?win[e]=t:win[e]=function(){n&&n();t()}}function attachLoadMethod(handler){ENGINE||(LIBRARY=determineSelectorMethod());var engines=ENGINES,method,caller,args;forEach(engines,function(engine,obj){if(win[engine]&&!method&&obj.m){method=eval(obj.m.replace("*",engine));caller=obj.c?eval(obj.c.replace("*",engine)):win;args=[];if(method&&caller){obj.p&&args.push(obj.p);args.push(handler);method.apply(caller,args);return!1}}});method||addEvent("load",handler)}function buildSelector(e){var t=e.nodeName.toLowerCase();e.id?t+="#"+e.id:e.FLX_DOM_ID&&(t+="["+FLX_DOM_ATTR+"='"+e.FLX_DOM_ID+"']");return t}function setFlexieId(e){if(!e.FLX_DOM_ID){FLX_DOM_ID+=1;e.FLX_DOM_ID=FLX_DOM_ID;e.setAttribute(FLX_DOM_ATTR,e.FLX_DOM_ID)}}function buildSelectorTree(e){var t=[],n,r,i,s,o,u,a;e=e.replace(WHITESPACE_CHARACTERS,EMPTY_STRING);e=e.replace(/\s?(\{|\:|\})\s?/g,PLACEHOLDER_STRING);n=e.split(END_MUSTACHE);forEach(n,function(e,n){if(n){r=[n,END_MUSTACHE].join(EMPTY_STRING);i=/(\@media[^\{]+\{)?(.*)\{(.*)\}/.exec(r);if(i&&i[3]){s=i[2];o=i[3].split(";");a=[];forEach(o,function(e,t){u=t.split(":");u.length&&u[1]&&a.push({property:u[0],value:u[1]})});s&&a.length&&t.push({selector:s,properties:a})}}});return t}function findFlexboxElements(e){var t,n,r,i,s,o=/\s?,\s?/,u,a,f={},l={};u=function(e,t,n,r){var i={selector:trim(e),properties:[]};forEach(t.properties,function(e,t){i.properties.push({property:trim(t.property),value:trim(t.value)})});n&&r&&(i[n]=r);return i};a=function(e,t,n,r){var i=n&&r?f[e]:l[e],s;if(i){forEach(t.properties,function(e,t){forEach(i.properties,function(e,n){if(t.property===n.property){s=e;return!1}});s?i.properties[s]=t:i.properties.push(t)});n&&r&&(i[n]=r)}else n&&r?f[e]=u(e,t,n,r):l[e]=u(e,t,NULL,NULL)};forEach(e,function(e,u){t=trim(u.selector).replace(o,",").split(o);forEach(t,function(e,t){t=trim(t);n=u.properties;forEach(n,function(e,n){r=trim(n.property);i=trim(n.value);if(r){s=r.replace("box-",EMPTY_STRING);switch(s){case"display":i==="box"&&a(t,u,NULL,NULL);break;case"orient":case"align":case"direction":case"pack":a(t,u,NULL,NULL);break;case"flex":case"flex-group":case"ordinal-group":a(t,u,s,i)}}})})});forEach(l,function(e,t){FLEX_BOXES.push(t)});forEach(f,function(e,t){POSSIBLE_FLEX_CHILDREN.push(t)});return{boxes:FLEX_BOXES,children:POSSIBLE_FLEX_CHILDREN}}function matchFlexChildren(e,t,n){var r,i,s=[];forEach(n,function(n,o){if(o.selector){r=t(o.selector);r=r[0]?r:[r];r[0]&&forEach(r,function(t,n){if(n.nodeName!==UNDEFINED)switch(n.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:if(n.parentNode===e){setFlexieId(n);i={};forEach(o,function(e){i[e]=o[e]});i.match=n;s.push(i)}}})}else{setFlexieId(o);s.push({match:o,selector:buildSelector(o)})}});return s}function getParams(e){forEach(e,function(t,n){e[t]=n||DEFAULTS[t]});return e}function buildFlexieCall(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m={},g,y,b,w="["+FLX_PARENT_ATTR+"]";if(!e)return;forEach(e.boxes,function(d,E){E.selector=trim(E.selector);t=E.selector;n=E.properties;o=u=a=f=l=NULL;forEach(n,function(e,t){r=trim(t.property);i=trim(t.value);if(r){s=r.replace("box-",EMPTY_STRING);switch(s){case"display":i==="box"&&(o=i);break;case"orient":u=i;break;case"align":a=i;break;case"direction":f=i;break;case"pack":l=i}}});c=LIBRARY;h=c(E.selector);h=h[0]?h:[h];forEach(h,function(r,i){if(i.nodeType){setFlexieId(i);p=matchFlexChildren(i,c,e.children);b=t+" "+w;v={target:i,selector:t,properties:n,children:p,display:o,orient:u,align:a,direction:f,pack:l,nested:b};g=m[i.FLX_DOM_ID];if(g)forEach(v,function(e,t){switch(e){case"selector":t&&!(new RegExp(t)).test(g[e])&&(g[e]+=", "+t);break;case"children":forEach(v[e],function(t,n){y=FALSE;forEach(g[e],function(e,t){n.match.FLX_DOM_ID===t.match.FLX_DOM_ID&&(y=TRUE)});y||g[e].push(n)});break;default:t&&(g[e]=t)}});else{m[i.FLX_DOM_ID]=getParams(v);m[i.FLX_DOM_ID].target.setAttribute(FLX_PARENT_ATTR,TRUE)}}})});DOM_ORDERED=LIBRARY(w);FLEX_BOXES={};forEach(DOM_ORDERED,function(e,t){FLEX_BOXES[t.FLX_DOM_ID]=m[t.FLX_DOM_ID]});forEach(FLEX_BOXES,function(e,t){t.display==="box"&&(d=new FLX.box(t))})}function calcPx(e,t,n){var r=n.replace(n.charAt(0),n.charAt(0).toUpperCase()),i=e["offset"+r]||0;i&&forEach(t,function(t,n){n=parseFloat(e.currentStyle[n]);isNaN(n)||(i-=n)});return i}function getTrueValue(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;if(!PIXEL.test(i)&&NUMBER.test(i)){n=s.left;r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;s.left=i||0;i=s.pixelLeft+"px";s.left=n||0;e.runtimeStyle.left=r}return i}function unAuto(e,t,n){var r;switch(n){case"width":r=[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT];t=calcPx(e,r,n);break;case"height":r=[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM];t=calcPx(e,r,n);break;default:t=getTrueValue(e,n)}return t}function getPixelValue(e,t,n){if(PIXEL.test(t))return t;t==="auto"||t==="medium"?t=unAuto(e,t,n):t=getTrueValue(e,n);return t}function getComputedStyle(e,t,n){var r;if(e===UNDEFINED)return;win.getComputedStyle?r=win.getComputedStyle(e,NULL)[t]:SIZES.test(t)?r=getPixelValue(e,e&&e.currentStyle?e.currentStyle[t]:0,t):r=e.currentStyle[t];if(n){r=parseInt(r,10);isNaN(r)&&(r=0)}return r}function clientWidth(e){return e.innerWidth||e.clientWidth}function clientHeight(e){return e.innerHeight||e.clientHeight}function appendProperty(e,t,n,r){var i=[];forEach(PREFIXES,function(e,s){i.push((r?s:EMPTY_STRING)+t+":"+(r?EMPTY_STRING:s)+n)});e.style.cssText+=i.join(";");return e}function appendPixelValue(e,t,n){var r=e&&e[0]?e:[e];forEach(r,function(e,r){r&&r.style&&(r.style[t]=n?n+"px":EMPTY_STRING)})}function calculateSpecificity(e){var t,n,r;t=e.replace(CSS_SELECTOR,function(e,t){return"%"+t}).replace(/\s|\>|\+|\~/g,"%").split(/%/g);n={_id:100,_class:10,_tag:1};r=0;forEach(t,function(e,t){/#/.test(t)?r+=n._id:/\.|\[|\:/.test(t)?r+=n._class:/[a-zA-Z]+/.test(t)&&(r+=n._tag)});return r}function filterDuplicates(e,t,n){var r=[],i,s=(n?"ordinal":"flex")+"Specificity";forEach(e,function(e,t){if(!n&&t.flex||n&&t["ordinal-group"]){t[s]=t[s]||calculateSpecificity(t.selector);i=FALSE;forEach(r,function(e,n){if(n.match===t.match){n[s]<t[s]&&(r[e]=t);i=TRUE;return FALSE}});i||r.push(t)}});return r}function createMatchMatrix(e,t,n){var r={},i=[],s=0,o,u="ordinal-group",a="data-"+u;e=filterDuplicates(e,t,n);forEach(t,function(t,i){forEach(e,function(e,t){if(n){o=t[u]||"1";if(t.match===i){t.match.setAttribute(a,o);r[o]=r[o]||[];r[o].push(t)}}else{o=t.flex||"0";if(t.match===i&&(!t[o]||t[o]&&parseInt(t[o],10)<=1)){s+=parseInt(o,10);r[o]=r[o]||[];r[o].push(t)}}});if(n&&!i.getAttribute(a)){o="1";i.setAttribute(a,o);r[o]=r[o]||[];r[o].push({match:i})}});forEach(r,function(e){i.push(e)});i.sort(function(e,t){return t-e});return{keys:i,groups:r,total:s}}function attachResizeListener(e,t){if(!RESIZE_LISTENER){var n,r,i,s,o=doc.body,u=doc.documentElement,a,f="innerWidth",l="innerHeight",c="clientWidth",h="clientHeight";addEvent("resize",function(){a&&window.clearTimeout(a);a=window.setTimeout(function(){i=win[f]||u[f]||u[c]||o[c];s=win[l]||u[l]||u[h]||o[h];if(n!==i||r!==s){FLX.updateInstance(NULL,NULL);n=i;r=s}},250)});RESIZE_LISTENER=TRUE}}function cleanPositioningProperties(e){var t,n;forEach(e,function(e,r){t=r.style.width;n=r.style.height;r.style.cssText=EMPTY_STRING;r.style.width=t;r.style.height=n})}function sanitizeChildren(e,t){var n=[],r,i,s;for(i=0,s=t.length;i<s;i++){r=t[i];if(r)switch(r.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:if(r.nodeType===1)n.push(r);else if(r.nodeType===3&&(r.isElementContentWhitespace||ONLY_WHITESPACE.test(r.data))){e.removeChild(r);i--}}}return n}function parentFlex(e){var t=0,n=e.parentNode,r,i,s;while(n.FLX_DOM_ID){r=FLEX_BOXES[n.FLX_DOM_ID];i=createMatchMatrix(r.children,sanitizeChildren(n,n.childNodes),NULL);t+=i.total;s=TRUE;n=n.parentNode}return{nested:s,flex:t}}function dimensionValues(e,t){var n=e.parentNode,r,i;if(n.FLX_DOM_ID){r=FLEX_BOXES[n.FLX_DOM_ID];forEach(r.properties,function(e,n){if((new RegExp(t)).test(n.property)){i=TRUE;return FALSE}})}return i}function updateChildValues(e){e.flexMatrix&&forEach(e.children,function(t,n){n.flex=e.flexMatrix[t]});e.ordinalMatrix&&forEach(e.children,function(t,n){n["ordinal-group"]=e.ordinalMatrix[t]});return e}function ensureStructuralIntegrity(e,t){var n=e.target;n.FLX_DOM_ID||(n.FLX_DOM_ID=n.FLX_DOM_ID||++FLX_DOM_ID);e.nodes||(e.nodes=sanitizeChildren(n,n.childNodes));if(!e.selector){e.selector=buildSelector(n);n.setAttribute(FLX_PARENT_ATTR,TRUE)}e.properties||(e.properties=[]);e.children||(e.children=matchFlexChildren(n,LIBRARY,sanitizeChildren(n,n.childNodes)));e.nested||(e.nested=e.selector+" ["+FLX_PARENT_ATTR+"]");e.target=n;e._instance=t;return e}var FLX={},FLX_DOM_ID=0,FLX_DOM_ATTR="data-flexie-id",FLX_PARENT_ATTR="data-flexie-parent",SUPPORT,ENGINE,ENGINES={NW:{s:"*.Dom.select"},DOMAssistant:{s:"*.$",m:"*.DOMReady"},Prototype:{s:"$$",m:"document.observe",p:"dom:loaded",c:"document"},YAHOO:{s:"*.util.Selector.query",m:"*.util.Event.onDOMReady",c:"*.util.Event"},MooTools:{s:"$$",m:"window.addEvent",p:"domready"},Sizzle:{s:"*"},jQuery:{s:"*",m:"*(document).ready"},dojo:{s:"*.query",m:"*.addOnLoad"}},LIBRARY,PIXEL=/^-?\d+(?:px)?$/i,NUMBER=/^-?\d/,SIZES=/width|height|margin|padding|border/,MSIE=/(msie) ([\w.]+)/,WHITESPACE_CHARACTERS=/\t|\n|\r/g,RESTRICTIVE_PROPERTIES=/^max\-([a-z]+)/,PROTOCOL=/^https?:\/\//i,LEADINGTRIM=/^\s\s*/,TRAILINGTRIM=/\s\s*$/,ONLY_WHITESPACE=/^\s*$/,CSS_SELECTOR=/\s?(\#|\.|\[|\:(\:)?[^first\-(line|letter)|before|after]+)/g,EMPTY_STRING="",SPACE_STRING=" ",PLACEHOLDER_STRING="$1",PADDING_RIGHT="paddingRight",PADDING_BOTTOM="paddingBottom",PADDING_LEFT="paddingLeft",PADDING_TOP="paddingTop",BORDER_RIGHT="borderRightWidth",BORDER_BOTTOM="borderBottomWidth",BORDER_LEFT="borderLeftWidth",BORDER_TOP="borderTopWidth",HORIZONTAL="horizontal",VERTICAL="vertical",INLINE_AXIS="inline-axis",BLOCK_AXIS="block-axis",INHERIT="inherit",LEFT="left",END_MUSTACHE="}",PREFIXES=" -o- -moz- -ms- -webkit- -khtml- ".split(SPACE_STRING),DEFAULTS={orient:HORIZONTAL,align:"stretch",direction:INHERIT,pack:"start"},FLEX_BOXES=[],POSSIBLE_FLEX_CHILDREN=[],DOM_ORDERED,RESIZE_LISTENER,TRUE=!0,FALSE=!1,NULL=null,UNDEFINED,BROWSER={IE:function(){var e,t=win.navigator.userAgent,n=MSIE.exec(t.toLowerCase());n&&(e=parseInt(n[2],10));return e}()},selectivizrEngine;selectivizrEngine=function(){function a(e){return e.replace(u,PLACEHOLDER_STRING)}function f(e){return a(e).replace(o,SPACE_STRING)}function l(e){return f(e.replace(i,PLACEHOLDER_STRING).replace(s,PLACEHOLDER_STRING))}function c(e){return e.replace(r,function(e,t,n){var r,i;r=n.split(",");forEach(r,function(e,t){i=l(t)+SPACE_STRING});return t+r.join(",")})}function h(){if(win.XMLHttpRequest)return new win.XMLHttpRequest;try{return new win.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return NULL}}function p(e){var t=h();t.open("GET",e,FALSE);t.send();return t.status===200?t.responseText:EMPTY_STRING}function d(e,t){function n(e){return e.substring(0,e.indexOf("/",8))}if(!e)return;if(PROTOCOL.test(e))return n(t)===n(e)?e:NULL;if(e.charAt(0)==="/")return n(t)+e;var r=t.split("?")[0];e.charAt(0)!=="?"&&r.charAt(r.length-1)!=="/"&&(r=r.substring(0,r.lastIndexOf("/")+1));return r+e}function v(r){return r?p(r).replace(e,EMPTY_STRING).replace(t,function(e,t,n,i,s,o){var u=v(d(n||s,r));return o?"@media "+o+" {"+u+"}":u}).replace(n,function(e,t,n,i){n=n||EMPTY_STRING;return t?e:" url("+n+d(i,r,!0)+n+") "}):EMPTY_STRING}var e=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,t=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))\s*([^;]*);/g,n=/(behavior\s*?:\s*)?\burl\(\s*(["']?)(?!data:)([^"')]+)\2\s*\)/g,r=/((?:^|(?:\s*})+)(?:\s*@media[^{]+{)?)\s*([^\{]*?[\[:][^{]+)/g,i=/([(\[+~])\s+/g,s=/\s+([)\]+~])/g,o=/\s+/g,u=/^\s*((?:[\S\s]*\S)?)\s*$/;return function(){var e,t,n,r,i=doc.getElementsByTagName("BASE"),s=i.length>0?i[0].href:doc.location.href,o,u,a;for(n=0,r=doc.styleSheets.length;n<r;n++){t=doc.styleSheets[n];if(t&&t.href!==NULL){e=d(t.href,s);if(e){o=c(v(e));u=buildSelectorTree(o);a=findFlexboxElements(u)}}}buildFlexieCall(a)}}();FLX.box=function(e){return this.renderModel(e)};FLX.box.prototype={properties:{boxModel:function(e,t,n){var r,i,s,o;e.style.display="block";BROWSER.IE===8&&(e.style.overflow="hidden");if(!n.cleared){selectors=n.selector.split(/\s?,\s?/);i=doc.styleSheets;i=i[i.length-1];s="padding-top:"+(getComputedStyle(e,PADDING_TOP,NULL)||"0.1px;");o=["content: '.'","display: block","height: 0","overflow: hidden"].join(";");forEach(selectors,function(t,n){if(i.addRule)if(BROWSER.IE<8){e.style.zoom="1";BROWSER.IE===6?i.addRule(n.replace(/\>|\+|\~/g,""),s+"zoom:1;",0):BROWSER.IE===7&&i.addRule(n,s+"display:inline-block;",0)}else{i.addRule(n,s,0);i.addRule(n+":before",o,0);i.addRule(n+":after",o+";clear:both;",0)}else if(i.insertRule){i.insertRule(n+"{"+s+"}",0);i.insertRule(n+":after{"+o+";clear:both;}",0)}});n.cleared=TRUE}},boxDirection:function(e,t,n){var r,i;if(n.direction==="reverse"&&!n.reversed||n.direction==="normal"&&n.reversed){t=t.reverse();forEach(t,function(t,n){e.appendChild(n)});r=LIBRARY(n.nested);forEach(r,function(e,t){i=FLEX_BOXES[t.FLX_DOM_ID];i&&i.direction===INHERIT&&(i.direction=n.direction)});n.reversed=!n.reversed}},boxOrient:function(e,t,n){var r=this,i,s;i={pos:"marginLeft",opp:"marginRight",dim:"width",out:"offsetWidth",func:clientWidth,pad:[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT]};s={pos:"marginTop",opp:"marginBottom",dim:"height",out:"offsetHeight",func:clientHeight,pad:[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM]};SUPPORT||forEach(t,function(e,t){t.style[BROWSER.IE>=9?"cssFloat":"styleFloat"]=LEFT;if(n.orient===VERTICAL||n.orient===BLOCK_AXIS)t.style.clear=LEFT;BROWSER.IE===6&&(t.style.display="inline")});switch(n.orient){case VERTICAL:case BLOCK_AXIS:r.props=s;r.anti=i;break;default:r.props=i;r.anti=s}},boxOrdinalGroup:function(e,t,n){var r,i;if(!t.length)return;r=function(r){var i=r.keys;forEach(n.reversed?i:i.reverse(),function(n,r){forEach(t,function(t,n){r===n.getAttribute("data-ordinal-group")&&e.appendChild(n)})})};i=createMatchMatrix(n.children,t,TRUE);i.keys.length>1&&r(i)},boxFlex:function(e,t,n){var r=this,i,s,o,u,a,f,l;if(!t.length)return;i=function(e){var t=e.groups,n=e.keys,i;forEach(n,function(e,n){forEach(t[n],function(e,t){i=NULL;forEach(t.properties,function(e,t){RESTRICTIVE_PROPERTIES.test(t.property)&&(i=parseFloat(t.value))});(!i||t.match[r.props.out]>i)&&appendPixelValue(t.match,r.props.pos,NULL)})})};s=function(n){var i=0,s,o;forEach(t,function(e,t){i+=getComputedStyle(t,r.props.dim,TRUE);forEach(r.props.pad,function(e,n){i+=getComputedStyle(t,n,TRUE)});i+=getComputedStyle(t,r.props.pos,TRUE);i+=getComputedStyle(t,r.props.opp,TRUE)});s=e[r.props.out]-i;forEach(r.props.pad,function(t,n){s-=getComputedStyle(e,n,TRUE)});o=s/n.total;return{whitespace:s,ration:o}};o=function(e,t){var n=e.groups,i=e.keys,s,o,u=t.ration,a,f,l;forEach(i,function(e,t){a=u*t;forEach(n[t],function(e,n){if(n.match){s=n.match.getAttribute("data-flex");o=n.match.getAttribute("data-specificity");if(!s||o<=n.flexSpecificity){n.match.setAttribute("data-flex",t);n.match.setAttribute("data-specificity",n.flexSpecificity);f=getComputedStyle(n.match,r.props.dim,TRUE);l=Math.max(0,f+a);appendPixelValue(n.match,r.props.dim,l)}}})})};u=createMatchMatrix(n.children,t,NULL);if(u.total){n.hasFlex=TRUE;a=i(u);f=s(u);l=o(u,f)}},boxAlign:function(e,t,n){var r=this,i,s,o=parentFlex(e);if(!SUPPORT&&!o.flex&&(n.orient===VERTICAL||n.orient===BLOCK_AXIS)){dimensionValues(e,r.anti.dim)||appendPixelValue(e,r.anti.dim,NULL);appendPixelValue(t,r.anti.dim,NULL)}i=e[r.anti.out];forEach(r.anti.pad,function(t,n){i-=getComputedStyle(e,n,TRUE)});switch(n.align){case"start":break;case"end":forEach(t,function(e,t){s=i-t[r.anti.out];s-=getComputedStyle(t,r.anti.opp,TRUE);appendPixelValue(t,r.anti.pos,s)});break;case"center":forEach(t,function(e,t){s=(i-t[r.anti.out])/2;appendPixelValue(t,r.anti.pos,s)});break;default:forEach(t,function(t,n){switch(n.nodeName.toLowerCase()){case"button":case"input":case"select":break;default:var o=0;forEach(r.anti.pad,function(t,r){o+=getComputedStyle(n,r,TRUE);o+=getComputedStyle(e,r,TRUE)});n.style[r.anti.dim]="100%";s=n[r.anti.out]-o;appendPixelValue(n,r.anti.dim,NULL);s=i;s-=getComputedStyle(n,r.anti.pos,TRUE);forEach(r.anti.pad,function(e,t){s-=getComputedStyle(n,t,TRUE)});s-=getComputedStyle(n,r.anti.opp,TRUE);s=Math.max(0,s);appendPixelValue(n,r.anti.dim,s)}})}},boxPack:function(e,t,n){var r=this,i=0,s=0,o=0,u,a,f,l,c=t.length-1,h;forEach(t,function(e,t){i+=t[r.props.out];i+=getComputedStyle(t,r.props.pos,TRUE);i+=getComputedStyle(t,r.props.opp,TRUE)});s=getComputedStyle(t[0],r.props.pos,TRUE);u=e[r.props.out]-i;forEach(r.props.pad,function(t,n){u-=getComputedStyle(e,n,TRUE)});u<0&&(u=Math.max(0,u));switch(n.pack){case"end":appendPixelValue(t[0],r.props.pos,o+s+u);break;case"center":o&&(o/=2);appendPixelValue(t[0],r.props.pos,o+s+Math.floor(u/2));break;case"justify":a=Math.floor((o+u)/c);l=a*c-u;var p=t.length-1,d;while(p){h=t[p];f=a;if(l){f++;l++}d=getComputedStyle(h,r.props.pos,TRUE)+f;appendPixelValue(h,r.props.pos,d);p--}}e.style.overflow=""}},setup:function(e,t,n){var r=this,i,s;if(!e||!t||!n)return;if(SUPPORT&&SUPPORT.partialSupport){i=createMatchMatrix(n.children,t,NULL);s=parentFlex(e);t=sanitizeChildren(e,e.childNodes);r.properties.boxOrient.call(r,e,t,n);if(!i.total||!LIBRARY(n.nested).length){n.align==="stretch"&&!SUPPORT.boxAlignStretch&&(!s.nested||!s.flex)&&r.properties.boxAlign.call(r,e,t,n);n.pack==="justify"&&!SUPPORT.boxPackJustify&&!i.total&&r.properties.boxPack.call(r,e,t,n)}}else SUPPORT||forEach(r.properties,function(t,i){i.call(r,e,sanitizeChildren(e,e.childNodes),n)})},trackDOM:function(e){attachResizeListener(this,e)},updateModel:function(e){var t=this,n=e.target,r=e.nodes;cleanPositioningProperties(r);if(e.flexMatrix||e.ordinalMatrix)e=updateChildValues(e);t.setup(n,r,e);t.bubbleUp(n,e)},renderModel:function(e){var t=this,n=e.target,r=n.childNodes;if(!n.length&&!r)return!1;e=ensureStructuralIntegrity(e,this);t.updateModel(e);win.setTimeout(function(){t.trackDOM(e)},0);return t},bubbleUp:function(e,t){var n=this,r,i=t.target.parentNode;while(i){r=FLEX_BOXES[i.FLX_DOM_ID];if(r){cleanPositioningProperties(r.nodes);n.setup(r.target,r.nodes,r)}i=i.parentNode}}};FLX.updateInstance=function(e,t){var n;if(e){n=FLEX_BOXES[e.FLX_DOM_ID];n?n._instance.updateModel(n):n=new FLX.box(t)}else forEach(FLEX_BOXES,function(e,t){t._instance.updateModel(t)})};FLX.getInstance=function(e){return FLEX_BOXES[e.FLX_DOM_ID]};FLX.destroyInstance=function(e){var t,n;n=function(e){e.target.FLX_DOM_ID=NULL;e.target.style.cssText=EMPTY_STRING;forEach(e.children,function(e,t){t.match.style.cssText=EMPTY_STRING})};if(e){t=FLEX_BOXES[e.FLX_DOM_ID];t&&n(t)}else{forEach(FLEX_BOXES,function(e,t){n(t)});FLEX_BOXES=[]}};FLX.flexboxSupport=function(){var e={},t=100,n,r=doc.createElement("flxbox"),i='<b style="margin: 0; padding: 0; display:block; width: 10px; height:'+t/2+'px"></b>',s,o;r.style.width=r.style.height=t+"px";r.innerHTML=i+i+i;appendProperty(r,"display","box",NULL);appendProperty(r,"box-align","stretch",TRUE);appendProperty(r,"box-pack","justify",TRUE);doc.body.appendChild(r);n=r.firstChild.offsetHeight;s={boxAlignStretch:function(){return n===100},boxPackJustify:function(){var e=0;forEach(r.childNodes,function(t,n){e+=n.offsetLeft});return e===135}};forEach(s,function(t,n){o=n();o||(e.partialSupport=TRUE);e[t]=o});doc.body.removeChild(r);return~r.style.display.indexOf("box")?e:FALSE};FLX.init=function(){FLX.flexboxSupported=SUPPORT=FLX.flexboxSupport();(!SUPPORT||SUPPORT.partialSupport)&&LIBRARY&&selectivizrEngine()};FLX.version="1.0.3";attachLoadMethod(FLX.init);return FLX}(this,document);CSS3Utility.prototype.cssQuery=function(){function d(e,t){if(!e)return[];var n=arguments.callee.caching&&!t;t=t?t.constructor==Array?t:[t]:[document];h=!1;var r=m(e).split(","),i=[];for(var s in r){e=g(r[s]);var o=0,u,a,f="",l=t;while(o<e.length){u=e[o++];a=e[o++];f+=u+a;l=n&&p[f]?p[f]:T(l,u,a);n&&
(p[f]=l)}i=i.concat(l)}return i}function m(e){return e.replace(o,u).replace(x.ALL,x.ID).replace(i,s)}function g(e){t.test(e)&&(e=" "+e);return e.match(n)||[]}function w(e){return b.test(e)?e:"'"+e+"'"}function E(e){return b.test(e)?e.slice(1,-1):e}function x(e,t,n){this.id=S.length;var r="element.";switch(e.toLowerCase()){case"id":r+="id";break;case"class":r+="className";break;default:r+="getAttribute('"+e+"')"}switch(t){case"=":r+="=="+w(n);break;case"~=":r="/(^|\\s)"+E(n)+"(\\s|$)/.test("+r+")";break;case"|=":r="/(^|-)"+E(n)+"(-|$)/.test("+r+")"}_(S,new Function("element","return "+r))}function T(e,t,n){var i="";if(r.test(n)){n=n.split("|");i=n[0];n=n[1]}var s=[],o;switch(t){case" ":for(o in e){if(typeof e[o]=="function")continue;var u=N(e[o],n,i);for(var a=0;a<u.length;a++)M(u[a])&&(!i||L(u[a],i))&&_(s,u[a])}break;case">":for(o in e){var u=e[o].childNodes;for(var a=0;a<u.length;a++)C(u[a],n,i)&&_(s,u[a])}break;case"+":for(o in e){var f=O(e[o]);f&&C(f,n,i)&&_(s,f)}break;case"~":for(o in e){var f=e[o];while(f=O(f))f&&C(f,n,i)&&_(s,f)}break;case".":n=new RegExp("(^|\\s)"+n+"(\\s|$)");for(o in e)n.test(e[o].className)&&_(s,e[o]);break;case"#":for(o in e)e[o].id==n&&_(s,e[o]);break;case"@":n=S[n];for(o in e)n(e[o])&&_(s,e[o]);break;case":":n=y[n];for(o in e)n(e[o])&&_(s,e[o])}return s}function C(e,t,n){return n&&!L(e,n)?!1:t=="*"?M(e):h?e.tagName==t:e.tagName==t.toUpperCase()}function L(e,t){return e[k]==t}function A(e){while((e=e.previousSibling)&&!M(e))continue;return e}function O(e){while((e=e.nextSibling)&&!M(e))continue;return e}function M(e){return Boolean(e.nodeType==a&&e.tagName!="!")}function _(e,t){e[e.length]=t}var e="1.0.1",t=/^[^>\+~\s]/,n=/[\s>\+~:@#\.]|[^\s>\+~:@#\.]+/g,r=/\|/,i=/([\s>\+~\,]|^)([\.:#@])/g,s="$1*$2",o=/^\s+|\s*([\+\,>\s;:])\s*|\s+$/g,u="$1",a=1,f=3,l=9,c=/MSIE/.test(navigator.appVersion),h,p={};d.caching=!1;d.reset=function(){p={}};d.toString=function(){return"function cssQuery() {\n  [version "+e+"]\n}"};var v=c?function(e){e.nodeType!=l&&(e=e.document);return e.mimeType=="XML Document"}:function(e){e.nodeType==l&&(e=e.documentElement);return e.localName!="HTML"},y={link:function(e){for(var t=0;t<document.links;t++)if(document.links[t]==e)return!0},visited:function(e){},"first-child":function(e){return!A(e)},"last-child":function(e){return!O(e)},root:function(e){var t=e.ownerDocument||e.document;return Boolean(e==t.documentElement)},empty:function(e){for(var t=0;t<e.childNodes.length;t++)if(M(e.childNodes[t])||e.childNodes[t].nodeType==f)return!1;return!0}},b=/([\'\"])[^\1]*\1/,S=[];x.prototype.toString=function(){return x.PREFIX+this.id};x.PREFIX="@";x.ALL=/\[([^~|=\]]+)([~|]?=?)([^\]]+)?\]/g;x.ID=function(e,t,n,r){return new x(t,n,r)};var N=c?function(e,t){return t=="*"&&e.all?e.all:e.getElementsByTagName(t)}:function(e,t,n){return n?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t)},k=c?"scopeName":"prefix";if("i".replace(/i/,function(){return""})){var D=String.prototype.replace,P=function(e,t){var n,r="",i=this;while(n=e.exec(i)){r+=i.slice(0,n.index)+t(n[0],n[1],n[2],n[3],n[4]);i=i.slice(n.lastIndex)}return r+i};String.prototype.replace=function(e,t){this.replace=typeof t=="function"?P:D;return this.replace(e,t)}}return d}();CSS3Utility.prototype.XBrowserAddEventHandler=function(target,eventName,handlerName){if(!target)return;if(target.addEventListener)target.addEventListener(eventName,function(e){eval(handlerName)(e)},!1);else if(target.attachEvent)target.attachEvent("on"+eventName,function(e){eval(handlerName)(e)});else{var originalHandler=target["on"+eventName];originalHandler?target["on"+eventName]=function(e){originalHandler(e);eval(handlerName)(e)}:target["on"+eventName]=eval(handlerName)}var l=this.handlerList.length;this.handlerList[l]=new Array(2);this.handlerList[l][0]=target.id;this.handlerList[l][1]=eventName};CSS3Utility.prototype.getPseudoCssRules=function(e,t){this.cssRules=new Array;var n=e.replace("-","-")+"[\\s]*:[\\s]*([^;}]*)[;}]",r="$",i=new RegExp(n,"g"),s=i.exec(t),o=0;while(s){var u=t.substr(0,t.substr(0,t.indexOf(s[0])).lastIndexOf("{")),a=u.substr(u.lastIndexOf("}")+1).replace(/^\s*|\s*$/g,"");this.cssRules[o]=new Object;this.cssRules[o].selectorText=a;this.cssRules[o].property=e;this.cssRules[o].value=s[1].replace(/(\r?\n)*/g,"");o++;s=i.exec(t)}};CSS3Utility.prototype.randomId=function(){var e="";for(var t=0;t<6;t++)e+=String.fromCharCode(97+Math.floor(Math.random()*24));return e};CSS3Utility.prototype.debug=function(e){var t=document.getElementById("debugOutput");typeof t!="undefined"&&t&&(t.innerHTML+=e)};var css3MC=new CSS3MultiColumn;